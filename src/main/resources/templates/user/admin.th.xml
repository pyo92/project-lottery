<?xml version="1.0" ?>
<thlogic>
    <attr sel="#header" th:replace="~{header :: header}"/>
    <attr sel="#footer" th:replace="~{footer :: footer}"/>

    <!-- 사용자 탭 START -->

    <attr sel="#user-count"
          th:text="${'&#128101 ' + userCnt + '명'}"/>

    <attr sel=".user"
          th:each="user, idx: ${users}">
        <attr sel=".user-info">
            <attr sel=".user-info-detail">
                <attr sel=".user-id">
                    <attr sel="span[0]"
                          th:text="${'[' + (idx.index + 1) + ']&nbsp;'}"/>
                    <attr sel="span[1]"
                          th:id="${'user-id-' + idx.index}"
                          th:text="${user.userId}"/>
                    <attr sel="span[2]"
                          th:text="${'&nbsp;(' + user.toStringUserRole + ')'}"/>
                </attr>
                <attr sel=".user-created-at">
                    <attr sel="span[0]"
                          th:text="${'&#9654;&nbsp; ' + user.toStringCreatedAt + ' 가입'}"/>
                </attr>

                <attr sel="button"
                      th:onclick="'saveUser(' + ${idx.index} + ')'"/>

                <attr sel=".user-role"
                      th:each="role: ${userRoleTypes}">
                    <attr sel="input"
                          th:id="${'chk-' + idx.index + '-' + role.ordinal}"
                          th:checked="${#lists.contains(user.userRoleTypes, role)}"/>
                    <attr sel="label"
                          th:for="${'chk-' + idx.index + '-' + role.ordinal}"
                          th:id="${'lbl-' + idx.index + '-' + role.ordinal}"
                          th:text="${'&nbsp;' + role.toString}"/>
                </attr>
            </attr>
        </attr>
        <attr sel=".user-modified-at">
            <attr sel="span[1]"
                  th:text="${user.toStringModifiedAt}"/>
        </attr>
    </attr>

    <!-- 사용자 탭 END -->

    <!-- API 탭 START -->

    <attr sel="#api-status"
          th:text="${#strings.isEmpty(runningUrl) ? '&#9989 작업 가능' : '&#8987 작업중 - ' + runningUrl}"/>

    <attr sel=".api"
          th:each="api, idx : ${apis}">
        <attr sel=".api-info">
            <attr sel=".api-url">
                <attr sel="span[0]"
                      th:text="${'[' + (idx.index + 1) + '] '}"/>
                <attr sel="span[1]"
                      th:id="${'apiUrl' + (idx.index + 1)}"
                      th:text="${api.url}"/>
            </attr>
            <attr sel=".api-params">
                <attr sel="#param1">
                    <attr sel="span[0]"
                          th:text="${'&#9654;&nbsp; ' + (idx.index == 0 ? 'state=&nbsp;' : 'start=&nbsp;')}"/>
                    <attr sel="input[0]"
                          th:id="${'api' + (idx.index + 1) + 'Param1'}"/>
                </attr>
                <attr sel="#param2"
                      th:style="${idx.index == 0 ? 'display: none;' : ''}">
                    <attr sel="input[0]"
                          th:id="${'api' + (idx.index + 1) + 'Param2'}"/>
                </attr>
            </attr>
            <attr sel="button"
                  th:id="${'btnApiRun' + (idx.index + 1)}"
                  th:disabled="${#bools.isTrue(runningYn)}"
                  th:classappend="${#bools.isFalse(runningYn) ? 'btn-success label-mini-title label-white' :
                                    (#strings.equals(runningUrl, api.url) ? 'btn-danger label-mini-title label-white' : 'btn-secondary label-mini-title label-white')}"
                  th:style="${#bools.isFalse(runningYn) ? '' :
                              (#strings.equals(runningUrl, api.url) ? '' : 'display: none;')}"
                  th:text="${#bools.isFalse(runningYn) ? '실행' :
                            (#strings.equals(runningUrl, api.url) ? '실행중' : '대기')}"/>
        </attr>
        <attr sel=".api-time">
            <attr sel="span[1]"
                  th:text="${api.toStringModifiedAt}"/>
        </attr>
    </attr>

    <!-- API 탭 END -->

    <!-- Selenium 탭 START -->
    <attr sel="#selenium-cnt"
          th:text="${'&#9989 ' + seleniumCnt + '개'}"/>

    <attr sel=".selenium"
          th:each="selenium, idx: ${seleniumList}">
        <attr sel=".selenium-info">
            <attr sel=".selenium-name">
                <attr sel="span[0]"
                      th:text="${'[' + (idx.index + 1) + '] '}"/>
                <attr sel="span[1]"
                      th:text="${selenium.name}"/>
            </attr>
            <attr sel="button"
                  th:id="${'btnSelenium' + (idx.index + 1)}"
                  th:style="${#bools.isTrue(selenium.isRunning) ? 'display: block;' : 'display: none;'}"
                  th:onclick="'suspendSeleniumProcess(' + ${idx.index} + ');'"/>
        </attr>
        <attr sel=".selenium-status">
            <attr sel="span"
                  th:id="${'lblSeleniumStatus' + (idx.index + 1)}"
                  th:text="${#bools.isTrue(selenium.isRunning) ? '&#8987;&nbsp;작업중' : '&#128164;&nbsp;유휴 상태'}"/>
        </attr>
    </attr>

    <!-- Selenium 탭 END -->
</thlogic>
